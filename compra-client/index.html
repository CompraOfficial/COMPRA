<!DOCTYPE html>
<html data-wf-page="62da9e4a5e4a27979d2f00af" data-wf-site="62da9e495e4a27647f2f00aa" lang="en">
<head>
  <meta charset="utf-8">
  <title>Startup Template - compra Responsive Website Template</title>
  <meta content="Startup Template - compra Responsive Website Template" name="description">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="compra" name="generator">
  <link href="css/normalize.css" rel="stylesheet" type="text/css">
  <link href="css/compra.css" rel="stylesheet" type="text/css">
  <link href="css/compra-client.compra.css" rel="stylesheet" type="text/css">
  <!-- [if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script><![endif] -->
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="images/favicon.jpg" rel="shortcut icon" type="image/x-icon">
  <link href="images/webclip.jpg" rel="apple-touch-icon">

  <!-- jQuery -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

  <!-- Local Routing -->
  <script src="js/local_routes.js"></script>
</head>
<body>

  <div data-w-id="ef4e1bb6-584b-7c67-994a-37be285eb9d3" style="opacity:0" class="navbar">
    <div class="container">
      <div class="nav-content">
        <div class="nav-left-content"><img src="images/noname123.png" loading="lazy" alt="" class="nav-logo">
          <a href="index.html" aria-current="page" class="nav-link w--current">Home</a>
          <a href="#" class="nav-link">About Us</a>
          <a href="#" class="nav-link">Contacts</a>
          <a href="#" class="nav-link">Shop</a>
        </div>
        <div class="nav-right-content">
          <a data-w-id="8b1bc39d-fad3-28f0-65c2-9c1c9607123e" href="#" class="nav-link">Login</a>
          <a data-w-id="50907ffb-f76f-d7ec-c89a-a87d4c2418bc" href="#" class="nav-link mr-0">signup</a>
        </div>
      </div>
    </div>
  </div>

  <div class="main-home-section">
    <div data-w-id="ba2a404c-d936-1efc-9669-953968deb195" style="opacity:0" class="mhome-footer">
      <div class="content-vcenter">
        <div class="icon-wrapper"><img src="images/fa-solid_shipping-fast-1.svg" loading="lazy" alt=""></div>
        <div>Fast Shipping</div>
      </div>
      <div class="content-vcenter">
        <div class="icon-wrapper"><img src="images/bxs_happy-beaming-1.svg" loading="lazy" alt=""></div>
        <div>99% Satisficed Customer</div>
      </div>
      <div class="content-vcenter">
        <div class="icon-wrapper"><img src="images/mdi_account-cash-1.svg" loading="lazy" alt=""></div>
        <div>Cash On Delivery</div>
      </div>
    </div>
    <div data-w-id="ddb0d304-4127-c781-026d-a27955868154" style="opacity:0" class="trademark">Created by compra ⓒ 2022 all rights reserved.</div>
    <h1 data-w-id="3cd75543-1109-61b2-b619-c1a5c069e220" style="opacity:0" class="h1 mhome">Your <span class="text-orange">COMPRA</span> and coconut oil<br>trading app.<br><br>
      <a href="#" class="start-here"><span class="fa arrow"></span>  START HERE</a>
    </h1>
  </div>

  <div class="modal login">
    <div class="content-modal">
      <img src="images/xmark-solid.svg" loading="lazy" data-w-id="fd3fa5d3-41ca-ad0a-c2cc-30710539652d"
      alt="" class="close-modal">
      <div class="modal-title">Sign In</div>
      <div class="modal-sub-title mb-2">to Continue Compra</div>
      <!-- LOGIN FORM -->
      <div class="mb-2 w-form">
        <div id="" name="" class="w-clearfix">
          <!-- LOGIN EMAIL -->
          <input type="email" id="login-email" class="text-field mb-1 w-input" maxlength="256" name="email" placeholder="E-mail" id="email" required="">
          <!-- LOGIN PASSWORD -->
          <input type="password" id="login-password" class="text-field w-input" maxlength="256" name="password" placeholder="Password" id="password" required="">
          <!-- LOGIN TYPE (TRADER/BUYER) -->
          <div class="content-hbetween mb-flow px-1">
            <label class="w-checkbox">
              <div id="login-radio-buyer" class="w-checkbox-input w-checkbox-input--inputType-custom checkbox w--redirected-checked"></div>
              <input type="radio" name="login-type" value="Buyer" checked=""  style="opacity: 0; position: absolute; z-index: -1;"><span class="w-form-label">Compra Buyer</span>
            </label>
            <label class="w-checkbox">
              <div id="login-radio-trader" class="w-checkbox-input w-checkbox-input--inputType-custom checkbox"></div>
              <input type="radio" name="login-type" value="Trader"  style="opacity: 0; position: absolute; z-index: -1;"><span class="w-form-label">Compra Trader</span>
            </label>
          </div>

          <a href="#" class="forget-pass-link">Forget password?</a>
          <!-- LOGIN BUTTON -->
          <input type="button" id="login-button" value="Login" data-wait="Please wait..." class="button submit w-button">

        </div>
        <!-- ERROR MESSAGE -->
        <div class="w-form-done">
          <div>Thank you! Your submission has been received!</div>
        </div>
        <div class="error-message w-form-fail">
          <div class="text-block">Incorrect Login Credentials</div>
        </div>

      </div>

      <div class="text-center">Don&#x27;t have an account?   <a href="#" data-w-id="9bf96a97-683f-f201-c98c-d04f6a3ff6a1" class="link">Register</a>

      </div>
    </div>
  </div>

  <div class="modal signup">
    <div class="content-modal signup">
      <img src="images/xmark-solid.svg" loading="lazy" data-w-id="b52080be-d25f-f1d2-82a1-7c0ca02e5e13" alt="" class="close-modal">
      <div class="modal-title">Create Account</div>
      <div class="modal-sub-title mb-2">to Continue Compra</div>
      <!-- SIGNUP FORM -->
      <div class="mb-2 w-form">
        <div id= "" name= "" data-name="Email Form">
          <input id="register-company-name" type="text" class="text-field mb-0-5 w-input" maxlength="256" name="field" placeholder="Company Name" required="">
          <input type="text" class="text-field mb-0-5 w-input" maxlength="256" name="field" data-name="" placeholder="Owners Name" id="register-owner-name" required="">
          <input type="text" class="text-field mb-0-5 w-input" maxlength="256" name="field" data-name="" placeholder="Contact Number" id="register-contact-number" required="">
          <input type="text" class="text-field mb-0-5 w-input" maxlength="256" name="field" data-name="" placeholder="Address" id="register-address" required="">
          <input type="text" class="text-field mb-0-5 w-input" maxlength="256" name="field" data-name="" placeholder="Barangay" id="register-barangay" required="">
          <input type="text" class="text-field mb-0-5 w-input" maxlength="256" name="field" data-name="" placeholder="City/Province" id="register-city" required="">
          <input type="text" class="text-field mb-0-5 w-input" maxlength="256" name="field" data-name="" placeholder="ZIP Code"id="register-zip-code" required="">
          <input type="email" class="text-field mb-0-5 w-input" maxlength="256" name="Signup-Email" data-name="Signup-Email" placeholder="E-mail" id="register-email" required="">
          <input type="text" class="text-field w-input" maxlength="256" name="Signup-Password" data-name="Signup-Password" placeholder="Password" id="register-password" required="">

          <div class="content-hbetween mb-flow px-1">

            <label class="w-checkbox">
              <div id="register-radio-buyer" class="w-checkbox-input w-checkbox-input--inputType-custom checkbox w--redirected-checked"></div>
              <input type="radio" name="register-type" value="Buyer" checked="" style="opacity:0;position:absolute;z-index:-1"><span class="w-form-label">Compra Buyer</span>
            </label>

            <label class="w-checkbox">
              <div id="register-radio-trader" class="w-checkbox-input w-checkbox-input--inputType-custom checkbox"></div>
              <input type="radio" name="register-type" value="Trader" style="opacity:0;position:absolute;z-index:-1"><span class="w-form-label">Compra Trader</span>
            </label>

          </div>

          <label class="w-checkbox">
            <div id="agreement-radio" class="w-checkbox-input w-checkbox-input--inputType-custom checkbox "></div>
            <input type="checkbox" id="register-agreement"  required="" style="opacity:0;position:absolute;z-index:-1">
            <span class="w-form-label">I agree to the Compra Terms of Service and Privacy Policy.</span>
          </label>

          <input type="button" id="register-button" value="Register" class="button submit w-button">
        </div>
        <!-- ERROR MESSAGES -->
        <div class="w-form-done">
          <div>Thank you! Your submission has been received!</div>
        </div>
        <div class="error-message w-form-fail">
          <div class="text-block">Incorrect Login Credentials</div>
        </div>

      </div>

      <div class="text-center">Already have an account?   <a href="#" data-w-id="b52080be-d25f-f1d2-82a1-7c0ca02e5e30" class="link">Login</a>
      </div>
    </div>
  </div>

  <div class="modal document">
    <div class="content-modal">
      <div class="modal-title text-center">Submit Documents</div>
      <div class="modal-sub-title mb-2 normal">We need to verify your information. please submit the documents below to process your application.</div>
      <a href="#" class="button mb-flow w-button">Submit</a>
      <div class="text-center mb-1">Net yet sure?  <a href="#" data-w-id="53b5c07b-b96e-b18c-a544-035be728a60f" class="link">Go Back</a>
      </div>
      <a data-w-id="bd7941cb-a0b0-342e-3bdd-20eec79521ae" href="#" class="text-center link">Cancel</a>
    </div>
  </div>

  <div class="modal registering">
    <div class="content-modal"><img src="images/image-4.png" loading="lazy" alt="" class="register-img">
      <div class="modal-title text-center mb-1">Submit Documents</div>
      <div class="text-center mb-flow">Please wait for your confirmation we will send you an email.</div>
      <a data-w-id="4da129b1-8900-bf88-6f99-3efed67e36be" href="#" class="button w-button">OK</a>
    </div>
  </div>

  <div class="modal verification">
    <div class="content-modal"><img src="images/Screenshot-2022-09-22-044146.jpg" loading="lazy" alt="" class="register-img veri">
      <div class="modal-title text-center mb-1">Verification Complete</div>
      <div class="text-center mb-flow">Your data is being processed and you can already enjoy all the features of the application.</div>
      <a href="#" class="button w-button">Start Now</a>
    </div>
  </div>

  <div class="modal forgot">
    <div class="content-modal">
      <div class="modal-title text-center mb-1">Verification Complete</div>
      <div class="text-center mb-flow">Your data is being processed and you can already enjoy all the features of the application.</div>
      <div class="w-form">
        <form id= "" name= "" data-name="Email Form" method="get"><input type="email" class="text-field mb-1 w-input" maxlength="256" name="email-2" data-name="Email 2" placeholder="E-mail" id="email-2" required=""><input type="submit" value="Reset Password" data-wait="Please wait..." class="button submit w-button"></form>
        <div class="w-form-done">
          <div>Thank you! Your submission has been received!</div>
        </div>
        <div class="error-message w-form-fail">
          <div class="text-block">Incorrect Login Credentials</div>
        </div>
      </div><img src="images/xmark-solid.svg" loading="lazy" data-w-id="4528a79d-0970-d6ae-2005-43c2cb95c964" alt="" class="close-modal">
    </div>
  </div>

  <div class="modal forgot-sent">
    <div class="content-modal"><img src="images/Screenshot-2022-09-25-170706.png" loading="lazy" alt="" class="register-img veri reset">
      <div class="modal-title text-center mb-1">Password Reset Sent</div>
      <div class="text-center mb-flow">Your reset password link was sent to your email.</div>
      <div class="w-form">
        <form id= "" name= "" data-name="Email Form" method="get"><input type="submit" value="OK" data-wait="Please wait..." class="button submit w-button"></form>
        <div class="w-form-done">
          <div>Thank you! Your submission has been received!</div>
        </div>
        <div class="error-message w-form-fail">
          <div class="text-block">Incorrect Login Credentials</div>
        </div>
      </div><img src="images/xmark-solid.svg" loading="lazy" data-w-id="c9c696fe-7017-f2b0-8626-f860de7133e4" alt="" class="close-modal">
    </div>
  </div>

  <div class="modal ban">
    <div class="content-modal">
      <img src="images/xmark-solid.svg" loading="lazy" data-w-id="f78fec35-98df-c835-5a62-0eceab233c29" alt="" class="close-modal">
      <div class="modal-title mb-1">Notice</div>
      <img src="images/Screenshot-2022-09-27-042219.png" loading="lazy" alt="" class="register-img veri">
      <div class="text-center mb-flow">Sorry, your account is temporarily banned for 30 days. If you have any concern please contact us to our email.</div>
      <div class="w-form">
        <button class="button submit w-button">OK</button>
    </div>
  </div>

  <div class="modal onboarding">
    <div data-delay="4000" data-animation="slide" class="onboarding-slide w-slider" data-autoplay="false" data-easing="ease" data-hide-arrows="false" data-disable-swipe="false" data-autoplay-limit="0" data-nav-spacing="3" data-duration="500" data-infinite="true">
      <button onclick="closeOnboarding()" class="button w-button" style="position: absolute; top: 1rem; right: 1rem; z-index: 10;">Close</button>
      <div class="w-slider-mask">
        <div class="w-slide">
          <img src="images/istockphoto-1197112020-612x612.png" loading="lazy" alt="" class="onboarding-img">
        </div>
      </div>
      <div class="w-slider-arrow-left">
        <div class="onboarding-arrow w-icon-slider-left"></div>
      </div>
      <div class="w-slider-arrow-right">
        <div class="onboarding-arrow w-icon-slider-right"></div>
      </div>
      <div class="w-slider-nav w-round"></div>
    </div>
  </div>

  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=62da9e495e4a27647f2f00aa" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="js/compra.js" type="text/javascript"></script>
  <!-- [if lte IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif] -->
</body>

<script>
  // close modal onboarding
  function closeOnboarding(){
    $('.modal.onboarding').hide();
  }


  $(document).ready(function(){

    $("#login-button").click(function(){
      // getting of datas from frontend
      var loginType = $("input[name='login-type']:checked").val();
      var loginEmail = $('#login-email').val();
      var loginPass = $('#login-password').val();

      var dataForm = new FormData();

      //Trader = 1, Buyer = 2 (User Type)
      // data inputs for backend
      dataForm.append("usertype", loginType);
      dataForm.append("username", loginEmail);
      dataForm.append("password", loginPass);

      var xhr = new XMLHttpRequest(); // request for back end
      xhr.open("POST", USER_API.AUTH); // open connection for back end
      xhr.onload = function(){ // return from backend
        // this.response return data from back end
        if(this.response !== '404'){
          const parsedResponse = JSON.parse(this.response);

          console.log(parsedResponse.status)
          if(parsedResponse.status == 'banned'){
            alert('Your account has been banned! Please email or contact COMPRA for unbanning.');
          }else{
            saveCredentialsToLocalStorage(parsedResponse);
            loginType == 'Trader' ? redirectToTraderPage() : redirectToBuyerPage();
          }
        }else{
          alert('Invalid user credentials!');
        }

      }

      xhr.send(dataForm); // connect to backend
    });

    // login radio
    $('input[type=radio][name="login-type"]').change(function() {
      if (this.value == 'Buyer') {
        $("#login-radio-buyer").addClass("w--redirected-checked");
        $("#login-radio-trader").removeClass("w--redirected-checked");
      }
      else if (this.value == 'Trader') {
        $("#login-radio-buyer").removeClass("w--redirected-checked");
        $("#login-radio-trader").addClass("w--redirected-checked");
      }
    });

    $("#register-button").click(function(){
      var registerCompanyName = $('#register-company-name').val();
      var registerOwnerName = $('#register-owner-name').val();
      var registerContactNumber = $('#register-contact-number').val();
      var registerAddress = $('#register-address').val();
      var registerBarangay = $('#register-barangay').val();
      var registerCityProvince = $('#register-city').val();
      var registerzipcode = $('#register-zip-code').val();
      var registerEmail = $('#register-email').val();
      var registerPassword = $('#register-password').val();
      var registerType = $("input[name='register-type']:checked").val();

      var registrationAgreement = $("#register-agreement").is(':checked');

      if (!registrationAgreement) {
        alert('Terms of Service and Privacy Policy has not been agreed.');
      } else {

        var dataForm = new FormData();

        //Trader = 1, Buyer = 2 (User Type)
        dataForm.append("company", registerCompanyName);
        dataForm.append("owner", registerOwnerName);
        dataForm.append("phone", registerContactNumber);
        dataForm.append("address", registerAddress);
        dataForm.append("barangay", registerBarangay);
        dataForm.append("city", registerCityProvince);
        dataForm.append("zipcode", registerzipcode);
        dataForm.append("email", registerEmail);
        dataForm.append("password", registerPassword);
        dataForm.append("usertype", registerType);

        var xhr = new XMLHttpRequest();
        xhr.open("POST", USER_API.REGISTER);
        xhr.onload = function(){
          if (this.response === '404') {
            alert('Invalid Credentials!');
          } else if (this.response === '500' || this.response === '501') {
            alert('Something went wrong! Please try registering again!');
          } else {
            const parsedResponse = JSON.parse(this.response);
            console.log(this.response);
            console.log(parsedResponse);
            saveCredentialsToLocalStorage(parsedResponse);
            registerType == 'Trader' ? redirectToTraderPage() : redirectToBuyerPage();
          }
        }
        xhr.send(dataForm);
      }
    });

    // register radio
    $('input[type=radio][name="register-type"]').change(function() {
      if (this.value == 'Buyer') {
        $("#register-radio-buyer").addClass("w--redirected-checked");
        $("#register-radio-trader").removeClass("w--redirected-checked");
      }
      else if (this.value == 'Trader') {
        $("#register-radio-buyer").removeClass("w--redirected-checked");
        $("#register-radio-trader").addClass("w--redirected-checked");
      }
    });

    // register agreement
    $('#register-agreement').change(function() {
      if (this.checked) {
        $("#agreement-radio").addClass("w--redirected-checked");
      }
      else{
        $("#agreement-radio").removeClass("w--redirected-checked");
      }
    });

    function saveCredentialsToLocalStorage(response) {
      //Clear any existing local storage residue
      window.localStorage.clear();

      for (const key in response){
        if (response.hasOwnProperty(key)) {
          window.localStorage.setItem(`${key}`,`${response[key]}`);
        }
      }

    };

    function redirectToTraderPage() {
      window.location = TRADER_PAGES.HOME;
    };

    function redirectToBuyerPage() {
      window.location = BUYER_PAGES.HOME;
    };

  });
</script>

</html>